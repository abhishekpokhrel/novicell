(this.webpackJsonpnovicell=this.webpackJsonpnovicell||[]).push([[0],{211:function(e,t,n){e.exports=n(408)},216:function(e,t,n){},217:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},218:function(e,t,n){},408:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(78),i=n.n(c),o=(n(216),n(217),n(218),n(5)),l=n(26),s=n(8),u=Object(s.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var t=e.auth.email.length>4?e.auth.email.slice(0,3):e.auth.email;return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(o.c,{to:"/createwine"},"New Wine")),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.signOut},"Log Out")),r.a.createElement("li",null,r.a.createElement(o.c,{to:"/",className:"btn btn-floating pink lighten-1"},t)))})),m=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(o.c,{to:"/signin"},"Log In")))},d=Object(s.b)((function(e){return console.log("navbar",e),{auth:e.firebase.auth}}))((function(e){var t=e.auth;console.log(t);var n=t.uid?r.a.createElement(u,null):r.a.createElement(m,null);return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{to:"/",className:"left-align brand-logo"},"Home"),n))})),f=n(133),p=n.n(f),h=n(209),b=n(11),E=n(22),g=(n(137),n(33)),O=n.n(g);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){return function(t,n,a){a.getFirebase;var r=(0,a.getFirestore)();console.log("what is this state",n());var c=n().firebase.auth.email;r.collection("wines").add(w({},e,{createdBy:c,createdAt:new Date})).then((function(){t({type:"CREATE_WINE",wine:e})})).catch((function(e){t({type:"CREATE_WINE_ERROR",e:e})}))}},j=Object(s.b)(null,(function(e){return{deleteWine:function(t){return e(function(e){return function(t,n,a){a.getFirebase;var r=(0,a.getFirestore)();console.log("t'was deleted",e),r.collection("wines").doc(e).delete()}}(t))}}}))((function(e){return r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},e.wine.name),r.a.createElement("p",null,"Created By: ",e.wine.createdBy),r.a.createElement("p",{className:"grey-text"},e.wine.createdAt?O()(e.wine.createdAt.toDate().toISOString()).calendar():"")),r.a.createElement("div",null))})),N=n(134),S=n.n(N),C=function(e){var t=e.wines,n=e.filterText,a=e.sortText;if(n)return r.a.createElement("div",{className:"wine-list section"},t&&t.filter((function(e){return console.log("wine name",e),e.name.toLowerCase().indexOf(n.toString().toLowerCase())>=0})).map((function(e){return r.a.createElement(o.b,{to:"/wine/"+e.id,key:e.id},r.a.createElement(j,{wine:e}))})));if(1==a){console.log("sortText",a);var c=[].concat(t);return c=S()(c).asc((function(e){return e.name.toLowerCase()})),r.a.createElement("div",{className:"wine-list section"},c.map((function(e){return r.a.createElement(o.b,{to:"/wine/"+e.id,key:e.id},r.a.createElement(j,{wine:e,key:e.id}))})))}if(0==a){console.log("sortText",a);var i=[].concat(t);return i=S()(i).desc((function(e){return e.name.toLowerCase()})),r.a.createElement("div",{className:"wine-list section"},i.map((function(e){return r.a.createElement(o.b,{to:"/wine/"+e.id,key:e.id},r.a.createElement(j,{wine:e,key:e.id}))})))}return r.a.createElement("div",{className:"wine-list section"},t&&t.map((function(e){return r.a.createElement(o.b,{to:"/wine/"+e.id,key:e.id},r.a.createElement(j,{wine:e,key:e.id}))})))},x=n(40),D=n(80),P=n.n(D);n(377),n(381);P.a.initializeApp({apiKey:"AIzaSyDfEYlSg_enpw1WiKujme1l1b-G-zekz7A",authDomain:"novicell.firebaseapp.com",databaseURL:"https://novicell.firebaseio.com",projectId:"novicell",storageBucket:"novicell.appspot.com",messagingSenderId:"657002675437",appId:"1:657002675437:web:5e81ac034515bffaa760e4",measurementId:"G-HCMVJ9MZLR"});var k=P.a;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var A=Object(s.b)((function(e){return{wines:e.wine.wines,auth:e.firebase.auth}}),(function(e){return{createWine:function(t){return e(y(t))}}}))((function(e){e.wines;var t=e.auth,n=Object(a.useState)([]),c=Object(E.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)(""),u=Object(E.a)(s,2),m=u[0],d=u[1],f=Object(a.useState)(!0),g=Object(E.a)(f,2),v=g[0],w=g[1],y=Object(a.useState)([]),j=Object(E.a)(y,2),N=j[0],S=j[1];Object(a.useEffect)((function(){k.firestore().collection("wines").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.data(),{id:e.id}))})),o(t)}))}),[]),Object(a.useEffect)((function(){(function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openbrewerydb.org/breweries");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log("new way",n),S(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return t.uid?r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"row"},r.a.createElement("input",{type:"text",id:"filterText",onChange:function(e){d(Object(b.a)({},e.target.id,e.target.value))},placeholder:"Please enter the text to filter!"})),r.a.createElement("p",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",className:"filled-in",id:"sortText",onChange:function(e){w(e.currentTarget.checked)},checked:v}),r.a.createElement("span",null,"Sort"))),r.a.createElement("a",{className:"waves-effect waves-light btn",onClick:function(t){N.map((function(t){e.createWine({name:t.name,year:O()(t.update_at).year(),vineyard:t.country,description:t.website_url})})),console.log(e)}},"Get Data from API"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement(C,{wines:i,filterText:m.filterText,sortText:v})))):r.a.createElement(l.a,{to:"/signin"})}));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var T=Object(s.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{addComments:function(t){return e(function(e){return function(t,n,a){a.getFirebase;var r=(0,a.getFirestore)();console.log("what is this state",n());var c=n().firebase.auth.email,i=n().firebase.auth.uid;r.collection("comments").add(w({},e,{createdBy:c,createdAt:new Date,userid:i})).then((function(){t({type:"ADD_COMMENT",comment:e})})).catch((function(e){t({type:"ADD_COMMENT_ERROR",e:e})}))}}(t))}}}))((function(e){var t=e.match.params.id,n=Object(a.useState)({comment:""}),c=Object(E.a)(n,2),i=c[0].comment,o=c[1],s=Object(a.useState)([]),u=Object(E.a)(s,2),m=u[0],d=u[1];Object(a.useEffect)((function(){k.firestore().collection("comments").where("wineId","==",t).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.data(),{id:e.id}))})),d(t)}))}),[]),console.log("specific wine comments",m);var f=Object(a.useState)([]),p=Object(E.a)(f,2),h=p[0],g=p[1];Object(a.useEffect)((function(){k.firestore().collection("wines").doc(t).onSnapshot((function(e){g(e.data())}))}),[t]),console.log("specific wines",h);var v=m.map((function(e){return r.a.createElement("li",{class:"collection-item"},r.a.createElement("div",null,e.comment,r.a.createElement("a",{href:"#!",class:"secondary-content"},r.a.createElement("i",{class:"material-icons"},"Commented By: ",e.createdBy,"   "),h.createdAt?O()(e.createdAt.toDate().toISOString()).calendar():"")))}));return h?e.auth.uid?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m12"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},h.name),r.a.createElement("p",null,h.description)),r.a.createElement("div",{className:"card-action"},r.a.createElement("div",null,"Created By: ",h.createdBy),r.a.createElement("div",null,h.createdAt?O()(h.createdAt.toDate().toISOString()).calendar():"")))),r.a.createElement("div",{className:"col s12 m12"},r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),console.log(e);var a=t;e.addComments({comment:i,wineId:a}),n.currentTarget[0].value=""},className:"white"},r.a.createElement("div",{className:"card blue-grey darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("label",{htmlFor:"comment"},"Comment:"),r.a.createElement("textarea",{name:"comment",id:"comment",className:"materialize-textarea",onChange:function(e){o(Object(b.a)({},e.target.id,e.target.value))}})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn"},"Add Comment"))))),r.a.createElement("ul",{className:"collection with-header grey"},r.a.createElement("li",{class:"collection-header"},r.a.createElement("h4",null,"Comments: ")),v)):r.a.createElement(l.a,{to:"/signin"}):r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Loading Wine............"))})),_=n(81),F=n(82),W=n(84),L=n(83),B=n(85),M=function(e){function t(){var e,n;Object(_.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(W.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},n.handleChange=function(e){n.setState(Object(b.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),console.log("yo state ho",n.state),n.props.signIn(n.state)},n.test=function(e){alert("this is working")},n}return Object(B.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"text",onChange:this.handleChange,id:"email"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",onChange:this.handleChange,id:"password"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn"},"Login"),r.a.createElement("div",{className:"red-text center"}," ",t?r.a.createElement("p",null,t):null))))}}]),t}(a.Component),G=Object(s.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((n=t,function(e,t,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",e:t})}))}));var n}}}))(M),U=function(e){function t(){var e,n;Object(_.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(W.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",year:"",vineyard:"",description:""},n.handleChange=function(e){n.setState(Object(b.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),console.log(n.state),n.props.createWine(n.state),n.props.history.push("/")},n.test=function(e){alert("this is working")},n}return Object(B.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Create Wine"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{type:"text",onChange:this.handleChange,id:"name"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"year"},"Year:"),r.a.createElement("input",{type:"number",onChange:this.handleChange,id:"year"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"vineyard"},"Vineyard:"),r.a.createElement("input",{type:"text",onChange:this.handleChange,id:"vineyard"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"description"},"Description:"),r.a.createElement("textarea",{name:"description",id:"description",onChange:this.handleChange,className:"materialize-textarea"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn"},"Add Wine")))):r.a.createElement(l.a,{to:"/signin"})}}]),t}(a.Component),z=Object(s.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createWine:function(t){return e(y(t))}}}))(U);var J=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,component:A}),r.a.createElement(l.b,{path:"/wine/:id",component:T}),r.a.createElement(l.b,{path:"/signin",component:G}),r.a.createElement(l.b,{path:"/createwine",component:z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(20),K={wines:[{id:1,name:"first wine",year:"1111",vineyard:"france",description:"this is the best wine you can get"},{id:2,name:"second wine",year:"2222",vineyard:"italy",description:"this is the okay wine you can get"},{id:3,name:"third wine",year:"3333",vineyard:"spain",description:"this is the good wine you can get"}]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_WINE":return console.log("created wine",t.wine),e;case"CREATE_WINE_ERROR":return console.log("create wine error",t.e),e;case"ADD_COMMENT":return console.log("addded comment",t.comment),e;case"ADD_COMMENT_ERROR":return console.log("create wine error",t.e),e;case"DELETE_WINE":return console.log("deleted wine",t.id),e;default:return e}};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={authError:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return console.log("login success"),Z({},e,{authError:null});case"LOGIN_ERROR":return console.log("login error"),Z({},e,{authError:"Login failed"});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;default:return e}return e},Q=Object(H.c)({wine:V,auth:q,firebase:x.firebaseReducer}),X=n(210),ee=n(135),te=Object(H.e)(Q,{},Object(H.d)(Object(H.a)(X.a.withExtraArgument({getFirebase:x.getFirebase,getFirestore:ee.getFirestore})),Object(ee.reduxFirestore)(k),Object(x.reactReduxFirebase)(k)));i.a.render(r.a.createElement(s.a,{store:te},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[211,1,2]]]);
//# sourceMappingURL=main.7b23394d.chunk.js.map